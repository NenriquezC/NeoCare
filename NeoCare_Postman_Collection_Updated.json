{
  "info": {
    "_postman_id": "neocare-api-complete-2026",
    "name": "NeoCare API - Flujo Completo Automatizado 2026",
    "description": "Colecci√≥n 100% automatizada: Register ‚Üí Login ‚Üí Boards ‚Üí Lists ‚Üí Cards ‚Üí Worklogs ‚Üí Reports. Sin necesidad de editar nada, ¬°todo se genera din√°micamente! Ejecuta con Collection Runner.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "üöÄ FLUJO AUTOM√ÅTICO - Ejecuta en orden",
      "item": [
        {
          "name": "1Ô∏è‚É£ REGISTRO - Crear usuario",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Generar email √∫nico cada ejecuci√≥n",
                  "const timestamp = Date.now();",
                  "const randomId = Math.random().toString(36).substring(2, 8);",
                  "const uniqueEmail = `user_${timestamp}_${randomId}@test.com`;",
                  "pm.environment.set('user_email', uniqueEmail);",
                  "pm.environment.set('user_password', 'Password123!');",
                  "pm.environment.set('user_name', 'Usuario Test ' + timestamp);"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const responseCode = pm.response.code;",
                  "const responseData = pm.response.json();",
                  "",
                  "if (responseCode === 200 || responseCode === 201) {",
                  "    pm.environment.set('access_token', responseData.access_token);",
                  "    pm.test('‚úÖ USUARIO REGISTRADO', function () {",
                  "        pm.expect(responseCode).to.be.oneOf([200, 201]);",
                  "        pm.expect(responseData).to.have.property('access_token');",
                  "    });",
                  "    console.log('üìß Email: ' + pm.environment.get('user_email'));",
                  "    console.log('üîë Token obtenido y guardado');",
                  "} else {",
                  "    pm.test('‚ùå Error en registro', function () {",
                  "        pm.expect(responseCode).to.be.oneOf([200, 201]);",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{user_email}}\",\n  \"password\": \"{{user_password}}\",\n  \"name\": \"{{user_name}}\"\n}"
            },
            "url": {
              "raw": "http://localhost:8000/auth/register",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["auth", "register"]
            }
          }
        },
        {
          "name": "2Ô∏è‚É£ LOGIN - Obtener token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const responseCode = pm.response.code;",
                  "const responseData = pm.response.json();",
                  "",
                  "if (responseCode === 200) {",
                  "    pm.environment.set('access_token', responseData.access_token);",
                  "    pm.test('‚úÖ LOGIN EXITOSO', function () {",
                  "        pm.expect(responseCode).to.equal(200);",
                  "    });",
                  "    console.log('‚úÖ Autenticado como: ' + pm.environment.get('user_email'));",
                  "} else {",
                  "    pm.test('‚ùå Error en login', function () {",
                  "        pm.expect(responseCode).to.equal(200);",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{user_email}}\",\n  \"password\": \"{{user_password}}\"\n}"
            },
            "url": {
              "raw": "http://localhost:8000/auth/login",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["auth", "login"]
            }
          }
        },
        {
          "name": "3Ô∏è‚É£ OBTENER TABLEROS",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const responseCode = pm.response.code;",
                  "const responseData = pm.response.json();",
                  "",
                  "if (responseCode === 200 && responseData.length > 0) {",
                  "    const boardId = responseData[0].id;",
                  "    pm.environment.set('board_id', boardId);",
                  "    pm.test('‚úÖ TABLEROS OBTENIDOS', function () {",
                  "        pm.expect(responseCode).to.equal(200);",
                  "        pm.expect(responseData[0]).to.have.property('id');",
                  "    });",
                  "    console.log('üìã Tablero ID: ' + boardId);",
                  "    console.log('üìù Nombre: ' + responseData[0].name);",
                  "} else {",
                  "    pm.test('‚ö†Ô∏è No hay tableros', function () {",
                  "        pm.expect(responseCode).to.equal(200);",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:8000/boards/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["boards", ""]
            }
          }
        },
        {
          "name": "4Ô∏è‚É£ OBTENER LISTAS",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const responseCode = pm.response.code;",
                  "const responseData = pm.response.json();",
                  "",
                  "if (responseCode === 200 && responseData.length > 0) {",
                  "    const listId = responseData[0].id;",
                  "    pm.environment.set('list_id', listId);",
                  "    pm.test('‚úÖ LISTAS OBTENIDAS', function () {",
                  "        pm.expect(responseCode).to.equal(200);",
                  "        pm.expect(responseData[0]).to.have.property('id');",
                  "    });",
                  "    console.log('üìã Lista ID: ' + listId);",
                  "    console.log('Nombre: ' + responseData[0].name);",
                  "} else {",
                  "    pm.test('‚ö†Ô∏è Sin listas', function () {",
                  "        pm.expect(responseCode).to.equal(200);",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:8000/boards/{{board_id}}/lists",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["boards", "{{board_id}}", "lists"]
            }
          }
        },
        {
          "name": "5Ô∏è‚É£ CREAR TARJETA",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Generar t√≠tulo √∫nico para la tarjeta",
                  "const timestamp = Date.now();",
                  "pm.environment.set('card_title', 'Tarjeta Test ' + timestamp);"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const responseCode = pm.response.code;",
                  "const responseData = pm.response.json();",
                  "",
                  "if (responseCode === 200) {",
                  "    const cardId = responseData.id;",
                  "    pm.environment.set('card_id', cardId);",
                  "    pm.test('‚úÖ TARJETA CREADA', function () {",
                  "        pm.expect(responseCode).to.equal(200);",
                  "        pm.expect(responseData).to.have.property('id');",
                  "    });",
                  "    console.log('üÉè Card ID: ' + cardId);",
                  "    console.log('T√≠tulo: ' + responseData.title);",
                  "} else {",
                  "    pm.test('‚ùå Error al crear tarjeta', function () {",
                  "        pm.expect(responseCode).to.equal(200);",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"{{card_title}}\",\n  \"description\": \"Tarjeta de prueba automatizada\",\n  \"due_date\": \"2026-12-31\",\n  \"board_id\": {{board_id}},\n  \"list_id\": {{list_id}}\n}"
            },
            "url": {
              "raw": "http://localhost:8000/cards/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["cards", ""]
            }
          }
        },
        {
          "name": "6Ô∏è‚É£ LISTAR TARJETAS",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const responseCode = pm.response.code;",
                  "const responseData = pm.response.json();",
                  "",
                  "if (responseCode === 200) {",
                  "    pm.test('‚úÖ TARJETAS LISTADAS', function () {",
                  "        pm.expect(responseCode).to.equal(200);",
                  "        pm.expect(responseData).to.be.an('array');",
                  "    });",
                  "    console.log('üìä Total de tarjetas: ' + responseData.length);",
                  "} else {",
                  "    pm.test('‚ùå Error al listar tarjetas', function () {",
                  "        pm.expect(responseCode).to.equal(200);",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:8000/cards/?board_id={{board_id}}",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["cards", ""],
              "query": [
                {
                  "key": "board_id",
                  "value": "{{board_id}}"
                }
              ]
            }
          }
        },
        {
          "name": "7Ô∏è‚É£ OBTENER DETALLE DE TARJETA",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const responseCode = pm.response.code;",
                  "const responseData = pm.response.json();",
                  "",
                  "if (responseCode === 200) {",
                  "    pm.test('‚úÖ DETALLE DE TARJETA OBTENIDO', function () {",
                  "        pm.expect(responseCode).to.equal(200);",
                  "        pm.expect(responseData).to.have.property('id');",
                  "        pm.expect(responseData).to.have.property('title');",
                  "    });",
                  "    console.log('üÉè Tarjeta: ' + responseData.title);",
                  "} else {",
                  "    pm.test('‚ùå Error al obtener tarjeta', function () {",
                  "        pm.expect(responseCode).to.equal(200);",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:8000/cards/{{card_id}}",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["cards", "{{card_id}}"]
            }
          }
        },
        {
          "name": "8Ô∏è‚É£ ACTUALIZAR TARJETA (PATCH)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const responseCode = pm.response.code;",
                  "const responseData = pm.response.json();",
                  "",
                  "if (responseCode === 200) {",
                  "    pm.test('‚úÖ TARJETA ACTUALIZADA', function () {",
                  "        pm.expect(responseCode).to.equal(200);",
                  "        pm.expect(responseData.title).to.include('ACTUALIZADA');",
                  "    });",
                  "    console.log('‚úèÔ∏è Tarjeta actualizada: ' + responseData.title);",
                  "} else {",
                  "    pm.test('‚ùå Error al actualizar tarjeta', function () {",
                  "        pm.expect(responseCode).to.equal(200);",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"{{card_title}} - ACTUALIZADA\",\n  \"description\": \"Descripci√≥n actualizada autom√°ticamente\"\n}"
            },
            "url": {
              "raw": "http://localhost:8000/cards/{{card_id}}",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["cards", "{{card_id}}"]
            }
          }
        },
        {
          "name": "9Ô∏è‚É£ CREAR WORKLOG",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Generar fecha actual",
                  "const today = new Date().toISOString().split('T')[0];",
                  "pm.environment.set('worklog_date', today);"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const responseCode = pm.response.code;",
                  "const responseData = pm.response.json();",
                  "",
                  "if (responseCode === 201) {",
                  "    const worklogId = responseData.id;",
                  "    pm.environment.set('worklog_id', worklogId);",
                  "    pm.test('‚úÖ WORKLOG CREADO', function () {",
                  "        pm.expect(responseCode).to.equal(201);",
                  "        pm.expect(responseData).to.have.property('id');",
                  "    });",
                  "    console.log('‚è±Ô∏è Worklog ID: ' + worklogId);",
                  "    console.log('Horas: ' + responseData.hours);",
                  "} else {",
                  "    pm.test('‚ùå Error al crear worklog', function () {",
                  "        pm.expect(responseCode).to.equal(201);",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"card_id\": {{card_id}},\n  \"date\": \"{{worklog_date}}\",\n  \"hours\": 4.5\n}"
            },
            "url": {
              "raw": "http://localhost:8000/worklogs/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["worklogs", ""]
            }
          }
        },
        {
          "name": "üîü LISTAR WORKLOGS DE LA TARJETA",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const responseCode = pm.response.code;",
                  "const responseData = pm.response.json();",
                  "",
                  "if (responseCode === 200) {",
                  "    pm.test('‚úÖ WORKLOGS LISTADOS', function () {",
                  "        pm.expect(responseCode).to.equal(200);",
                  "        pm.expect(responseData).to.be.an('array');",
                  "    });",
                  "    console.log('üìä Total worklogs: ' + responseData.length);",
                  "} else {",
                  "    pm.test('‚ùå Error al listar worklogs', function () {",
                  "        pm.expect(responseCode).to.equal(200);",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:8000/worklogs/card/{{card_id}}",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["worklogs", "card", "{{card_id}}"]
            }
          }
        },
        {
          "name": "1Ô∏è‚É£1Ô∏è‚É£ MIS HORAS DE LA SEMANA",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const responseCode = pm.response.code;",
                  "",
                  "if (responseCode === 200) {",
                  "    const responseData = pm.response.json();",
                  "    pm.test('‚úÖ RESUMEN SEMANAL OBTENIDO', function () {",
                  "        pm.expect(responseCode).to.equal(200);",
                  "        pm.expect(responseData).to.have.property('total_hours');",
                  "        pm.expect(responseData).to.have.property('week');",
                  "    });",
                  "    console.log('‚è±Ô∏è Semana: ' + responseData.week);",
                  "    console.log('‚è±Ô∏è Total horas: ' + responseData.total_hours);",
                  "} else {",
                  "    pm.test('‚ùå Error al obtener resumen', function () {",
                  "        pm.expect(responseCode).to.equal(200);",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:8000/worklogs/me/week",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["worklogs", "me", "week"]
            }
          }
        },
        {
          "name": "1Ô∏è‚É£2Ô∏è‚É£ REPORTE SEMANAL DEL TABLERO",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Calcular semana actual en formato ISO",
                  "const now = new Date();",
                  "const startOfYear = new Date(now.getFullYear(), 0, 1);",
                  "const days = Math.floor((now - startOfYear) / (24 * 60 * 60 * 1000));",
                  "const weekNumber = Math.ceil((days + 1) / 7);",
                  "const weekISO = now.getFullYear() + '-W' + String(weekNumber).padStart(2, '0');",
                  "pm.environment.set('current_week', weekISO);",
                  "console.log('üìÖ Semana ISO: ' + weekISO);"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const responseCode = pm.response.code;",
                  "const responseData = pm.response.json();",
                  "",
                  "if (responseCode === 200) {",
                  "    pm.test('‚úÖ REPORTE SEMANAL OBTENIDO', function () {",
                  "        pm.expect(responseCode).to.equal(200);",
                  "        pm.expect(responseData).to.have.property('week');",
                  "        pm.expect(responseData).to.have.property('completed');",
                  "        pm.expect(responseData).to.have.property('new');",
                  "        pm.expect(responseData).to.have.property('overdue');",
                  "    });",
                  "    console.log('üìä Semana: ' + responseData.week);",
                  "    console.log('Completadas: ' + responseData.completed.count);",
                  "    console.log('Nuevas: ' + responseData.new.count);",
                  "    console.log('Vencidas: ' + responseData.overdue.count);",
                  "} else {",
                  "    pm.test('‚ùå Error al obtener reporte', function () {",
                  "        pm.expect(responseCode).to.equal(200);",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:8000/report/{{board_id}}/summary?week={{current_week}}",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["report", "{{board_id}}", "summary"],
              "query": [
                {
                  "key": "week",
                  "value": "{{current_week}}"
                }
              ]
            }
          }
        },
        {
          "name": "1Ô∏è‚É£3Ô∏è‚É£ HORAS POR USUARIO",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const responseCode = pm.response.code;",
                  "const responseData = pm.response.json();",
                  "",
                  "if (responseCode === 200) {",
                  "    pm.test('‚úÖ HORAS POR USUARIO OBTENIDAS', function () {",
                  "        pm.expect(responseCode).to.equal(200);",
                  "        pm.expect(responseData).to.be.an('array');",
                  "    });",
                  "    console.log('üë• Total usuarios: ' + responseData.length);",
                  "} else {",
                  "    pm.test('‚ùå Error al obtener horas por usuario', function () {",
                  "        pm.expect(responseCode).to.equal(200);",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:8000/report/{{board_id}}/hours-by-user?week={{current_week}}",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["report", "{{board_id}}", "hours-by-user"],
              "query": [
                {
                  "key": "week",
                  "value": "{{current_week}}"
                }
              ]
            }
          }
        },
        {
          "name": "1Ô∏è‚É£4Ô∏è‚É£ HORAS POR TARJETA",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const responseCode = pm.response.code;",
                  "const responseData = pm.response.json();",
                  "",
                  "if (responseCode === 200) {",
                  "    pm.test('‚úÖ HORAS POR TARJETA OBTENIDAS', function () {",
                  "        pm.expect(responseCode).to.equal(200);",
                  "        pm.expect(responseData).to.be.an('array');",
                  "    });",
                  "    console.log('üÉè Total tarjetas con horas: ' + responseData.length);",
                  "} else {",
                  "    pm.test('‚ùå Error al obtener horas por tarjeta', function () {",
                  "        pm.expect(responseCode).to.equal(200);",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:8000/report/{{board_id}}/hours-by-card?week={{current_week}}",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["report", "{{board_id}}", "hours-by-card"],
              "query": [
                {
                  "key": "week",
                  "value": "{{current_week}}"
                }
              ]
            }
          }
        },
        {
          "name": "1Ô∏è‚É£5Ô∏è‚É£ ELIMINAR TARJETA",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const responseCode = pm.response.code;",
                  "",
                  "if (responseCode === 204) {",
                  "    pm.test('‚úÖ TARJETA ELIMINADA', function () {",
                  "        pm.expect(responseCode).to.equal(204);",
                  "    });",
                  "    console.log('üóëÔ∏è Tarjeta eliminada correctamente');",
                  "} else {",
                  "    pm.test('‚ùå Error al eliminar tarjeta', function () {",
                  "        pm.expect(responseCode).to.equal(204);",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:8000/cards/{{card_id}}",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["cards", "{{card_id}}"]
            }
          }
        }
      ]
    }
  ]
}

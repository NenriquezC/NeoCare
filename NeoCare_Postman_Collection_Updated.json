{
  "info": {
    "_postman_id": "neocare-api-v4-2026",
    "name": "NeoCare API - Completo 2026 (Semana 4)",
    "description": "Colecci√≥n completa con TODOS los endpoints del backend NeoCare. Incluye: Auth, Boards, Lists, Cards y el nuevo m√≥dulo de Worklogs (Semana 4).",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "üîê AUTENTICACI√ìN",
      "item": [
        {
          "name": "Registro de usuario",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "const timestamp = Date.now();",
                  "const randomId = Math.random().toString(36).substring(2, 8);",
                  "pm.environment.set('user_email', `user_${timestamp}_${randomId}@test.com`);",
                  "pm.environment.set('user_password', 'password123');",
                  "pm.environment.set('user_name', `Usuario Test ${timestamp}`);"
                ]
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200 || pm.response.code === 201) {",
                  "    const data = pm.response.json();",
                  "    pm.environment.set('access_token', data.access_token);",
                  "    pm.test('‚úÖ Usuario registrado exitosamente', () => {",
                  "        pm.expect(data).to.have.property('access_token');",
                  "    });",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{user_email}}\",\n  \"password\": \"{{user_password}}\",\n  \"name\": \"{{user_name}}\"\n}"
            },
            "url": {
              "raw": "http://localhost:8000/auth/register",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["auth", "register"]
            }
          }
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const data = pm.response.json();",
                  "    pm.environment.set('access_token', data.access_token);",
                  "    pm.test('‚úÖ Login exitoso', () => {",
                  "        pm.expect(data).to.have.property('access_token');",
                  "    });",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{user_email}}\",\n  \"password\": \"{{user_password}}\"\n}"
            },
            "url": {
              "raw": "http://localhost:8000/auth/login",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["auth", "login"]
            }
          }
        }
      ]
    },
    {
      "name": "üìã TABLEROS (BOARDS)",
      "item": [
        {
          "name": "GET - Obtener todos los tableros",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const boards = pm.response.json();",
                  "    if (boards.length > 0) {",
                  "        pm.environment.set('board_id', boards[0].id);",
                  "    }",
                  "    pm.test('‚úÖ Tableros obtenidos', () => {",
                  "        pm.expect(boards).to.be.an('array');",
                  "    });",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {"key": "Authorization", "value": "Bearer {{access_token}}"}
            ],
            "url": {
              "raw": "http://localhost:8000/boards/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["boards", ""]
            }
          }
        }
      ]
    },
    {
      "name": "üìù LISTAS (LISTS)",
      "item": [
        {
          "name": "GET - Obtener listas de un tablero",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const lists = pm.response.json();",
                  "    if (lists.length > 0) {",
                  "        pm.environment.set('list_id', lists[0].id);",
                  "    }",
                  "    pm.test('‚úÖ Listas obtenidas', () => {",
                  "        pm.expect(lists).to.be.an('array');",
                  "    });",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {"key": "Authorization", "value": "Bearer {{access_token}}"}
            ],
            "url": {
              "raw": "http://localhost:8000/boards/{{board_id}}/lists/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["boards", "{{board_id}}", "lists", ""]
            }
          }
        }
      ]
    },
    {
      "name": "üéØ TARJETAS (CARDS)",
      "item": [
        {
          "name": "POST - Crear tarjeta",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "pm.environment.set('card_title', 'Tarea Postman #' + Date.now());"
                ]
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const card = pm.response.json();",
                  "    pm.environment.set('card_id', card.id);",
                  "    pm.test('‚úÖ Tarjeta creada', () => {",
                  "        pm.expect(card).to.have.property('id');",
                  "    });",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "Content-Type", "value": "application/json"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"{{card_title}}\",\n  \"description\": \"Creada desde Postman\",\n  \"due_date\": \"2025-12-31\",\n  \"board_id\": {{board_id}},\n  \"list_id\": {{list_id}}\n}"
            },
            "url": {
              "raw": "http://localhost:8000/cards/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["cards", ""]
            }
          }
        },
        {
          "name": "GET - Listar tarjetas",
          "request": {
            "method": "GET",
            "header": [{"key": "Authorization", "value": "Bearer {{access_token}}"}],
            "url": {
              "raw": "http://localhost:8000/cards/?board_id={{board_id}}",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["cards", ""],
              "query": [{"key": "board_id", "value": "{{board_id}}"}]
            }
          }
        }
      ]
    },
    {
      "name": "‚è±Ô∏è WORKLOGS (HORAS)",
      "item": [
        {
          "name": "POST - Registrar horas",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const data = pm.response.json();",
                  "    pm.environment.set('worklog_id', data.id);",
                  "    pm.test('‚úÖ Horas registradas', () => {",
                  "        pm.expect(data.hours).to.equal('4.50');",
                  "    });",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "Content-Type", "value": "application/json"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"card_id\": {{card_id}},\n  \"date\": \"2026-01-02\",\n  \"hours\": 4.5,\n  \"note\": \"Trabajo realizado desde Postman\"\n}"
            },
            "url": {
              "raw": "http://localhost:8000/worklogs/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["worklogs", ""]
            }
          }
        },
        {
          "name": "GET - Resumen semanal (Mis Horas)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('‚úÖ Resumen obtenido', () => {",
                  "    pm.expect(pm.response.code).to.equal(200);",
                  "    pm.expect(pm.response.json()).to.have.property('total_hours');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [{"key": "Authorization", "value": "Bearer {{access_token}}"}],
            "url": {
              "raw": "http://localhost:8000/worklogs/me/week?week=2026-W01",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["worklogs", "me", "week"],
              "query": [{"key": "week", "value": "2026-W01"}]
            }
          }
        },
        {
          "name": "PUT - Editar horas",
          "request": {
            "method": "PUT",
            "header": [
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "Content-Type", "value": "application/json"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"hours\": 5.0,\n  \"note\": \"Nota actualizada\"\n}"
            },
            "url": {
              "raw": "http://localhost:8000/worklogs/{{worklog_id}}",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["worklogs", "{{worklog_id}}"]
            }
          }
        },
        {
          "name": "DELETE - Eliminar horas",
          "request": {
            "method": "DELETE",
            "header": [{"key": "Authorization", "value": "Bearer {{access_token}}"}],
            "url": {
              "raw": "http://localhost:8000/worklogs/{{worklog_id}}",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["worklogs", "{{worklog_id}}"]
            }
          }
        }
      ]
    },
    {
      "name": "ÔøΩ INFORMES (REPORTS)",
      "item": [
        {
          "name": "GET - Resumen de tablero (Semanal)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:8000/report/{{board_id}}/summary?week=2026-W01",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "8000",
              "path": [
                "report",
                "{{board_id}}",
                "summary"
              ],
              "query": [
                {
                  "key": "week",
                  "value": "2026-W01"
                }
              ]
            }
          }
        },
        {
          "name": "GET - Horas por usuario (Semanal)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:8000/report/{{board_id}}/hours-by-user?week=2026-W01",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "8000",
              "path": [
                "report",
                "{{board_id}}",
                "hours-by-user"
              ],
              "query": [
                {
                  "key": "week",
                  "value": "2026-W01"
                }
              ]
            }
          }
        },
        {
          "name": "GET - Horas por tarjeta (Semanal)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:8000/report/{{board_id}}/hours-by-card?week=2026-W01",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "8000",
              "path": [
                "report",
                "{{board_id}}",
                "hours-by-card"
              ],
              "query": [
                {
                  "key": "week",
                  "value": "2026-W01"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "ÔøΩüîÑ FLUJO AUTOM√ÅTICO COMPLETO",
      "item": [
        {
          "name": "1. Registro",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "const ts = Date.now();",
                  "pm.environment.set('auto_email', `auto_${ts}@test.com`);",
                  "pm.environment.set('auto_pass', 'password123');",
                  "pm.environment.set('auto_name', `Usuario Auto ${ts}`);"
                ]
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200 || pm.response.code === 201) {",
                  "    pm.environment.set('auto_token', pm.response.json().access_token);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{auto_email}}\",\n  \"password\": \"{{auto_pass}}\",\n  \"name\": \"{{auto_name}}\"\n}"
            },
            "url": {
              "raw": "http://localhost:8000/auth/register",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["auth", "register"]
            }
          }
        },
        {
          "name": "2. Obtener Boards",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200 && pm.response.json().length > 0) {",
                  "    pm.environment.set('auto_board_id', pm.response.json()[0].id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [{"key": "Authorization", "value": "Bearer {{auto_token}}"}],
            "url": {
              "raw": "http://localhost:8000/boards/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["boards", ""]
            }
          }
        },
        {
          "name": "3. Obtener Lists",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200 && pm.response.json().length > 0) {",
                  "    pm.environment.set('auto_list_id', pm.response.json()[0].id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [{"key": "Authorization", "value": "Bearer {{auto_token}}"}],
            "url": {
              "raw": "http://localhost:8000/boards/{{auto_board_id}}/lists/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["boards", "{{auto_board_id}}", "lists", ""]
            }
          }
        },
        {
          "name": "4. Crear Card",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": ["pm.environment.set('auto_card_title', 'Auto Card ' + Date.now());"]
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    pm.environment.set('auto_card_id', pm.response.json().id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {"key": "Authorization", "value": "Bearer {{auto_token}}"},
              {"key": "Content-Type", "value": "application/json"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"{{auto_card_title}}\",\n  \"description\": \"Tarjeta del flujo autom√°tico\",\n  \"due_date\": \"2025-12-31\",\n  \"board_id\": {{auto_board_id}},\n  \"list_id\": {{auto_list_id}}\n}"
            },
            "url": {
              "raw": "http://localhost:8000/cards/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["cards", ""]
            }
          }
        },
        {
          "name": "5. Registrar Horas (Worklog)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    pm.environment.set('auto_worklog_id', pm.response.json().id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {"key": "Authorization", "value": "Bearer {{auto_token}}"},
              {"key": "Content-Type", "value": "application/json"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"card_id\": {{auto_card_id}},\n  \"date\": \"2026-01-02\",\n  \"hours\": 2.5,\n  \"note\": \"Horas auto\"\n}"
            },
            "url": {
              "raw": "http://localhost:8000/worklogs/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["worklogs", ""]
            }
          }
        },
        {
          "name": "6. Ver Resumen Semanal",
          "request": {
            "method": "GET",
            "header": [{"key": "Authorization", "value": "Bearer {{auto_token}}"}],
            "url": {
              "raw": "http://localhost:8000/worklogs/me/week?week=2026-W01",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["worklogs", "me", "week"],
              "query": [{"key": "week", "value": "2026-W01"}]
            }
          }
        },
        {
          "name": "7. Eliminar Card (Limpia worklogs)",
          "request": {
            "method": "DELETE",
            "header": [{"key": "Authorization", "value": "Bearer {{auto_token}}"}],
            "url": {
              "raw": "http://localhost:8000/cards/{{auto_card_id}}",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["cards", "{{auto_card_id}}"]
            }
          }
        }
      ]
    }
  ]
}
